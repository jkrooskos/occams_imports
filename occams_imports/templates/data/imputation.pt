<html metal:use-macro="load: ../master.pt">
  <metal:content-slot fill-slot="content-slot">
    <div data-bind="css: { 'alert': true, 'alert-success': isSuccess, 'alert-info': isInfo }">
      <span data-bind="text: msg"></span>
    </div>
    <h3 i18n:translate="">Imputation Mappings Applied Progress</h3>
    <hr>
    <div class="panel panel-default">
      <div class="panel-heading">Mappings Progress</div>
      <div class="panel-body">
        <div class="progress">
          <div class="progress-bar progress-bar-info progress-bar-striped"
               role="progressbar"
               data-bind="text: statusPercentageLabel, style: { width: widthPercentage } ">
          </div>
        </div>
      </div>
    </div>

  </metal:content-slot>

  <metal:javascript-slot fill-slot="javascript-slot">
  <script>
    $(function(){
      ko.applyBindings(
        new ImputationViewModel({
          notifications_url: "${request.route_path('imports.imputations_notifications')}",
          imputation_mappings_url: "${request.route_path('imports.apply_imputation')}"
        })
      );
    });
  </script>
  </metal:javascript-slot>
</html>