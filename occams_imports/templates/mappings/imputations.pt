<html metal:use-macro="load: ../master.pt">
  <metal:content-slot fill-slot="content-slot">
    <div style="display: none;" data-bind="visible: true">
    <header class="page-header">
      <h1 i18n:translate="">Imputation Mapping</h1>
    </header>
    <p i18n:translate="" class="lead">
        This interface was designed so you can map variables using imputations.
    </p>
    <br />
    <br />


        <div class="row">
          <div class="col-md-6">
            <div class="panel panel-primary">
              <div class="panel-heading">Select and/or convert</div>
              <div class="panel-body">
                <div class="row">
                  <div class="col-md-4 col-md-offset-8">
                    <button class="btn btn-default btn-md pull-right"
                            type="button">Add variable</button>
                  </div>
                </div>
                <br />

            </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="panel panel-primary">
              <div class="panel-heading">Impuation</div>
              <div class="panel-body">

                <form class="form-inline">
                  <div class="form-group">
                    <label class="control-label col-sm-3"
                           for="drsc_form">Form:</label>
                    <div class="col-sm-6">
                     <select class="form-control" id="drsc_form">
                        <option>drsc_form_a</option>
                        <option>drsc_form_b</option>
                    </select>
                  </div>
                  </div>

                  <div class="form-group">
                    <label class="control-label col-sm-4"
                           for="drsc_variable">Variable:</label>
                    <div class="col-sm-6">
                     <select class="form-control" id="drsc_form">
                        <option>alcohol_use</option>
                        <option>drug_use</option>
                    </select>
                  </div>
                  </div>
                  </form>
                  <br />
                  <br />

                <div class="row">
                  <div class="col-md-2">
                    <select data-bind="options: operators,
                                       value: selectedOperator"
                            class="form-control"
                            id="operator"
                            name="operator"></select>
                  </div>
                  <div class="col-md-4">
                    <button type="button"
                            class="btn btn-default dropdown-toggle"
                            data-toggle="dropdown">
                      Comparison Operator
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                      <li><a href="#"
                             data-bind="click: addComparisonOperator">Add</a></li>
                      <li><a href="#"
                             data-bind="click: deleteComparisonOperator">Remove</a></li>
                    </ul>
                  </div>

                  <div class="col-md-4">
                    <button type="button"
                            class="btn btn-default dropdown-toggle"
                            data-toggle="dropdown">
                      Logical Operator
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                      <li><a href="#"
                             data-bind="click: addLogicalOperator">Add</a></li>
                      <li><a href="#"
                             data-bind="click: deleteLogicalOperator">Remove</a></li>
                    </ul>
                  </div>
                </div>

                <div data-bind="foreach: comparisonOperators">
                  <div class="row">
                    <br />
                    <div class="col-md-2">
                      <select data-bind="options: operators"
                              class="form-control"
                              id="comparison_operator"
                              name="comparison_operator"></select>

                    </div>
                    <div class="col-md-2">
                      <input type="text"
                             class="form-control"
                             data-bind="value: value">
                      </input>
                    </div>
                  </div>
                </div> <!-- end foreach comparisonOperators -->

                <div data-bind="foreach: logicalOperators">
                  <div class="row">
                    <br />
                    <div class="col-md-2">
                      <select data-bind="options: operators"
                              class="form-control"
                              id="logical_operator"
                              name="logical_operator"></select>
                    </div>

                    <div class="col-md-4">
                      <button type="button"
                              class="btn btn-default dropdown-toggle"
                              data-toggle="dropdown">
                        Comparison Operator
                      <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li><a href="#"
                               data-bind="click: addComparisonOperator">Add</a></li>
                        <li><a href="#"
                               data-bind="click: deleteComparisonOperator">Remove</a></li>
                      </ul>
                    </div>
                  </div>

                    <div data-bind="foreach: comparisons">
                      <div class="row">
                        <br />
                        <div class="col-md-2 col-md-offset-2">
                          <select data-bind="options: operators"
                                  class="form-control"
                                  id="comparison_operator"
                                  name="comparison_operator"></select>

                        </div>
                        <div class="col-md-2">
                          <input type="text"
                                 class="form-control"
                                 data-bind="value: value">
                          </input>
                        </div>
                      </div>
                    </div> <!-- end foreach comparisons -->
                </div> <!-- end foreach logicalOperators -->

              <br />
              <br />

              <div class="row">
                <label class="control-label col-sm-2"
                       for="confidence">Confidence:</label>
                <div class="col-sm-2">
                    <input type="number"
                           class="form-control"
                           id="confidence"
                           min="1"
                           max="3"
                           data-bind="value: confidence"></input>
                </div>
                <div class="col-md-5">
                <!-- ko if: $root.confidence() == "1" -->
                <h6>No/little manipulation/interpretation</h6>
                <!-- /ko -->

                <!-- ko if: $root.confidence() == "2" -->
                <h6>Some manipulation/interpretation</h6>
                <!-- /ko -->

                <!-- ko if: $root.confidence() == "3" -->
                <h6>Significant manipulation/interpretation</h6>
                <!-- /ko -->
                </div>
                <div class="col-md-2">
                  <button class="btn btn-primary btn-lg"
                          type="button"
                          data-bind="click: saveImputation">Map</button>
                </div>
              </div> <!--end row -->
              </div> <!-- end panel body -->
            </div> <!-- end panel primary -->
          </div> <!--end col 6 -->
        </div> <!-- end row -->
      </div> <!-- end is ready -->
  </metal:content-slot>

  <metal:javascript-slot fill-slot="javascript-extras-slot">
    <script type="text/javascript">
      $(function(){
        'use strict';
        ko.applyBindings(new imputationViewModel());
      });
    </script>
  </metal:javascript-slot>

</html>